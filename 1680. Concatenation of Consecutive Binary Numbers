"""You can see the description of the task using the code specified in the title on leetcode.
 This program has O(n) complexity by time and O(1).

My bitwise arithmetic isn't that great yet. 
I spent half an hour trying to write the wrong solution.
With the help of hints, I came up with a beautiful solution.
We shift left by the number of bits of the new number and fill the vacated bits on the right with the same number. 
This way, we always maintain the current number and immediately divide by modulo.
"""

class Solution:
    def concatenatedBinary(self, n: int) -> int:
        MOD = 10**9 + 7
        res = 0
        
        for i in range(1, n + 1):
            bits = i.bit_length()
            res = ((res << bits) | i) % MOD
        
        return res
