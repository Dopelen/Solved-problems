#!/usr/bin/python
"""You can see the description of the task using the code specified in the title on leetcode.
This program has O(2 ** n * 2 ** n)) complexity by time and O(2 ** n * 2 ** n) by space.

I'd say the task is quite difficult. 
It's clear what needs to be done, but writing a beautiful recursion in this case IS POSSIBLE, but I found it very difficult.
"""

# https://leetcode.com/problems/fill-a-special-grid/solutions/6712423/divide-and-conquer-c-python-by-not_yl3-ll59/
class Solution:
    def specialGrid(self, N: int) -> List[List[int]]:
        size = 1 << N
        grid = [[0] * size for _ in range(size)]
        val = 0

        def solve(rowStart, rowEnd, colStart, colEnd):
            nonlocal val
            sz = rowEnd - rowStart
            if sz == 1:
                grid[rowStart][colStart] = val
                val += 1
                return
            midRow = rowStart + sz // 2
            midCol = colStart + sz // 2

            solve(rowStart, midRow, midCol, colEnd)
            solve(midRow, rowEnd, midCol, colEnd)
            solve(midRow, rowEnd, colStart, midCol)
            solve(rowStart, midRow, colStart, midCol)

        solve(0, size, 0, size)
        return grid
