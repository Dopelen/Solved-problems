"""You can see the description of the task using the code specified in the title on leetcode.
 This program has O(n) complexity by time and O(n).

After a couple of years of struggling with linked lists, they've become a little easier to understand. A LITTLE!
"""

# The correct solution
class Solution:
    def swapPairs(self, head: Optional[ListNode]) -> Optional[ListNode]:
        dummy = ListNode(0, head)
        prev = dummy

        while prev.next and prev.next.next:
            first = prev.next
            second = first.next
            first.next = second.next
            second.next = first
            prev.next = second
            prev = first

        return dummy.next


# Solution with change of results (which is prohibited by the condition)
class Solution:
    def swapPairs(self, head: Optional[ListNode]) -> Optional[ListNode]:
        initial_head = head
        swapped = False
        while head and head.next:
            if not swapped:
                head.val, head.next.val = head.next.val, head.val
            swapped = not swapped
            head = head.next
        return initial_head
